"use strict";(self.webpackChunkngrx_08_finished=self.webpackChunkngrx_08_finished||[]).push([[852],{7852:(y,d,i)=>{i.r(d),i.d(d,{AuthModule:()=>A});var p=i(4755),l=i(5030),m=i(9970),u=i(8332),n=i(2223);let h=(()=>{class o{constructor(t){this.viewContainerRef=t}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(n.s_b))},o.\u0275dir=n.lG2({type:o,selectors:[["","appPlaceholder",""]]}),o})();var c=i(8379),g=i(6789);let f=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"lds-ring"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"div")(2,"div")(3,"div")(4,"div"),n.qZA())},styles:[".lds-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:64px;height:64px}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:51px;height:51px;margin:6px;border:6px solid #2102cf;border-radius:50%;animation:_ngcontent-%COMP%_lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#2102cf transparent transparent transparent}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.45s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes _ngcontent-%COMP%_lds-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),o})();function _(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"app-alert",5),n.NdJ("close",function(){n.CHM(t);const s=n.oxw();return n.KtG(s.onHandleError())}),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("message",t.error)}}function v(o,r){1&o&&(n.TgZ(0,"div"),n._UZ(1,"app-loading-spinner"),n.qZA())}function b(o,r){1&o&&(n.TgZ(0,"div",18),n._uU(1,"Invalid email format"),n.qZA())}function C(o,r){1&o&&(n.TgZ(0,"div",18),n._uU(1,"Password should be at least 6 characters"),n.qZA())}function w(o,r){if(1&o){const t=n.EpF();n.TgZ(0,"form",6,7),n.NdJ("ngSubmit",function(){n.CHM(t);const s=n.MAs(1),a=n.oxw();return n.KtG(a.onSubmit(s))}),n.TgZ(2,"div",8),n._UZ(3,"input",9),n.TgZ(4,"label",10),n._uU(5,"Email address"),n.qZA(),n.YNc(6,b,2,0,"div",11),n.qZA(),n.TgZ(7,"div",12),n._UZ(8,"input",13),n.TgZ(9,"label",14),n._uU(10,"Password"),n.qZA(),n.YNc(11,C,2,0,"div",11),n.qZA(),n.TgZ(12,"div",15)(13,"button",16),n._uU(14),n.qZA(),n._uU(15," | "),n.TgZ(16,"button",17),n.NdJ("click",function(){n.CHM(t);const s=n.oxw();return n.KtG(s.onSwitchMode())}),n._uU(17),n.qZA()()()}if(2&o){const t=n.MAs(1),e=n.oxw();n.xp6(2),n.ekj("has-error",(null==t.controls.email?null:t.controls.email.invalid)&&(null==t.controls.email?null:t.controls.email.touched)),n.xp6(4),n.Q6J("ngIf",(null==t.controls.email||null==t.controls.email.errors?null:t.controls.email.errors.email)&&!e.isLoginMode),n.xp6(1),n.ekj("has-error",(null==t.controls.password?null:t.controls.password.invalid)&&(null==t.controls.password?null:t.controls.password.touched)),n.xp6(1),n.Q6J("type",e.showPassword?"password":"text"),n.xp6(3),n.Q6J("ngIf",(null==t.controls.password||null==t.controls.password.errors?null:t.controls.password.errors.minlength)&&!e.isLoginMode),n.xp6(2),n.Q6J("disabled",!t.valid),n.xp6(1),n.hij(" ",e.isLoginMode?"Login":"Sign Up"," "),n.xp6(3),n.hij(" Switch to ",e.isLoginMode?"Sign Up":"Login"," ")}}let x=(()=>{class o{constructor(t,e){this.componentFactoryResolver=t,this.store=e,this.isLoginMode=!0,this.isLoading=!1,this.showPassword=!1,this.error=null}ngOnInit(){this.storeSub=this.store.select("auth").subscribe(t=>{this.isLoading=t.loading,this.error=t.authError,this.error&&this.showErrorAlert(this.error)})}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){if(!t.valid)return;const e=t.value.email,s=t.value.password;this.store.dispatch(this.isLoginMode?c.h8({email:e,password:s}):c.UT({email:e,password:s})),t.reset()}onHandleError(){this.store.dispatch(c.fw())}showErrorAlert(t){if(console.log(t),!this.alertHost)return;const e=this.componentFactoryResolver.resolveComponentFactory(u.w),s=this.alertHost.viewContainerRef;s.clear();const a=s.createComponent(e);a.instance.message=t,this.closeSub=a.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),s.clear()})}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe(),this.storeSub&&this.storeSub.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(n._Vd),n.Y36(g.yh))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-auth"]],viewQuery:function(t,e){if(1&t&&n.Gf(h,5),2&t){let s;n.iGM(s=n.CRH())&&(e.alertHost=s.first)}},decls:5,vars:3,consts:[[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],[3,"message","close",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[3,"message","close"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","name@example.com","ngModel","","name","email","required","","email","",1,"form-control"],["for","floatingInput"],["class","text-danger",4,"ngIf"],[1,"form-floating"],["id","floatingPassword","placeholder","Password","ngModel","","name","password","required","","minlength","6",1,"form-control",3,"type"],["for","floatingPassword"],[1,"mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,_,1,1,"app-alert",2),n.YNc(3,v,2,0,"div",3),n.YNc(4,w,18,10,"form",4),n.qZA()()),2&t&&(n.xp6(2),n.Q6J("ngIf",e.error),n.xp6(1),n.Q6J("ngIf",e.isLoading),n.xp6(1),n.Q6J("ngIf",!e.isLoading))},dependencies:[p.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.on,l.On,l.F,u.w,f],styles:[".has-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#a94442}"]}),o})();var M=i(4466);let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[p.ez,l.u5,m.Bz.forChild([{path:"",component:x}]),M.m]}),o})()}}]);